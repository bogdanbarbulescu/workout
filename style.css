/* style.css - HTB Academy Inspired Theme (vFinal) */

/* 1. Definire Variabile Culoare */
:root {
    --htb-bg-darker: #151a2c;  /* Cel mai închis fundal (pt nav) */
    --htb-bg-dark: #1a2035;   /* Fundal principal body */
    --htb-bg-medium: #2a314b; /* Fundal carduri/secțiuni */
    --htb-bg-light: #3c466e;   /* Fundal hover/subtil */
    --htb-accent: #9fef00;    /* Verde vibrant */
    --htb-accent-darker: #8bdb00; /* Verde puțin mai închis (hover) */
    --htb-text-primary: #ffffff;
    --htb-text-secondary: #adb5bd; /* Gri deschis */
    --htb-text-muted: #6c757d;   /* Gri mai închis */
    --htb-border-color: #404a70;  /* Border subtil */
    --htb-border-light: rgba(159, 239, 0, 0.2); /* Border accent translucid */
    --htb-tag-medium: #ffae42;  /* Portocaliu/Maro pt warning */
    --htb-tag-red: #e74c3c;      /* Roșu pt danger */
    --htb-tag-blue: #3498db;     /* Albastru pt info */
    --font-stack: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

    /* Heatmap Colors (using HTB theme) */
    --heatmap-color-0: rgba(60, 70, 110, 0.3); /* Base - transparent version of bg-light */
    --heatmap-color-1: rgba(159, 239, 0, 0.3); /* Light - transparent accent */
    --heatmap-color-2: rgba(159, 239, 0, 0.6); /* Medium */
    --heatmap-color-3: rgba(159, 239, 0, 0.9); /* Heavy */
    --heatmap-color-4: var(--htb-accent);      /* Very Heavy (Optional - full accent) */
    --heatmap-border-color: rgba(159, 239, 0, 0.1); /* Accent border */

    /* Tooltip Colors */
    --tooltip-bg: var(--htb-bg-darker);
    --tooltip-text: var(--htb-text-primary);
}

/* 2. Override Variabile Bootstrap Globale pt [data-bs-theme="dark"] */
[data-bs-theme="dark"] {
    /* Culori de Bază */
    --bs-body-bg: var(--htb-bg-dark);
    --bs-body-color: var(--htb-text-secondary);
    --bs-emphasis-color: var(--htb-text-primary);
    --bs-secondary-bg: var(--htb-bg-medium);
    --bs-tertiary-bg: var(--htb-bg-medium);
    --bs-border-color: var(--htb-border-color);
    --bs-border-color-translucent: var(--htb-border-light);
    --bs-heading-color: var(--htb-text-primary);
    --bs-link-color: var(--htb-accent);
    --bs-link-hover-color: var(--htb-accent-darker);
    --bs-code-color: var(--htb-tag-blue); /* Culoare pt elemente 'code' dacă apar */

    /* Culoare Primară (Verde HTB) */
    --bs-primary: var(--htb-accent);
    --bs-primary-rgb: 159, 239, 0;
    --bs-primary-text-emphasis: #111827;
    --bs-primary-bg-subtle: rgba(159, 239, 0, 0.1);
    --bs-primary-border-subtle: rgba(159, 239, 0, 0.4);

    /* Butoane - General */
    --bs-btn-font-weight: 600;
    --bs-btn-padding-y: .3rem; /* Butoane puțin mai mici */
    --bs-btn-padding-x: .75rem;
    --bs-btn-font-size: .875rem;
    --bs-btn-border-radius: .3rem; /* Colțuri puțin mai rotunjite */
    --bs-btn-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05); /* Efect subtil */
    --bs-btn-disabled-opacity: 0.5;

    /* Butoane - Specific */
    --bs-btn-color: var(--htb-text-primary);
    --bs-btn-bg: var(--htb-bg-light);
    --bs-btn-border-color: var(--htb-border-color);
    --bs-btn-hover-bg: var(--htb-bg-medium);
    --bs-btn-hover-border-color: var(--htb-accent);
    --bs-btn-active-bg: var(--htb-bg-medium);
    --bs-btn-active-border-color: var(--htb-accent);

    --bs-btn-primary-color: var(--bs-primary-text-emphasis);
    --bs-btn-primary-bg: var(--htb-accent);
    --bs-btn-primary-border-color: var(--htb-accent);
    --bs-btn-primary-hover-bg: var(--htb-accent-darker);
    --bs-btn-primary-hover-border-color: var(--htb-accent-darker);
    --bs-btn-primary-active-bg: #7cc400;
    --bs-btn-primary-active-border-color: #7cc400;
    --bs-btn-primary-disabled-bg: var(--htb-accent);
    --bs-btn-primary-disabled-border-color: var(--htb-accent);

    --bs-btn-secondary-color: var(--htb-text-secondary); /* Buton standard/cancel */
    --bs-btn-secondary-bg: var(--htb-bg-light);
    --bs-btn-secondary-border-color: var(--htb-border-color);
    --bs-btn-secondary-hover-bg: var(--htb-bg-medium);
    --bs-btn-secondary-hover-border-color: var(--htb-text-secondary);

    --bs-btn-outline-secondary-color: var(--htb-text-secondary);
    --bs-btn-outline-secondary-border-color: var(--htb-border-color);
    --bs-btn-outline-secondary-hover-color: var(--htb-text-primary);
    --bs-btn-outline-secondary-hover-bg: var(--htb-bg-light);

    --bs-btn-warning-color: var(--bs-primary-text-emphasis);
    --bs-btn-warning-bg: var(--htb-tag-medium);
    --bs-btn-warning-border-color: var(--htb-tag-medium);
    --bs-btn-warning-hover-bg: #fca031;
    --bs-btn-warning-hover-border-color: #fca031;

    --bs-btn-danger-color: var(--htb-text-primary);
    --bs-btn-danger-bg: var(--htb-tag-red);
    --bs-btn-danger-border-color: var(--htb-tag-red);
    --bs-btn-danger-hover-bg: #c0392b;
    --bs-btn-danger-hover-border-color: #c0392b;

    --bs-btn-outline-danger-color: var(--htb-tag-red);
    --bs-btn-outline-danger-border-color: var(--htb-tag-red);
    --bs-btn-outline-danger-hover-color: var(--htb-text-primary);
    --bs-btn-outline-danger-hover-bg: var(--htb-tag-red);

    --bs-btn-info-color: var(--htb-text-primary);
    --bs-btn-info-bg: var(--htb-tag-blue);
    --bs-btn-info-border-color: var(--htb-tag-blue);
    --bs-btn-info-hover-bg: #2980b9;
    --bs-btn-info-hover-border-color: #2980b9;

    --bs-btn-success-color: var(--bs-primary-text-emphasis);
    --bs-btn-success-bg: var(--htb-accent);
    --bs-btn-success-border-color: var(--htb-accent);
    --bs-btn-success-hover-bg: var(--htb-accent-darker);
    --bs-btn-success-hover-border-color: var(--htb-accent-darker);

    --bs-btn-outline-success-color: var(--htb-accent);
    --bs-btn-outline-success-border-color: var(--htb-accent);
    --bs-btn-outline-success-hover-color: var(--bs-primary-text-emphasis);
    --bs-btn-outline-success-hover-bg: var(--htb-accent);

    /* Formulare */
    --bs-body-secondary-color: var(--htb-text-muted);
    --bs-secondary-color: var(--htb-text-secondary);
    --bs-form-label-color: var(--htb-text-secondary);
    --bs-form-control-bg: var(--htb-bg-dark);
    --bs-form-control-color: var(--htb-text-primary);
    --bs-form-control-border-color: var(--htb-border-color);
    --bs-form-control-focus-bg: var(--htb-bg-dark);
    --bs-form-control-focus-border-color: var(--htb-accent);
    --bs-form-control-placeholder-color: var(--htb-text-muted);
    --bs-form-select-bg: var(--bs-form-control-bg);
    --bs-form-select-indicator-color: var(--htb-text-secondary);
    --bs-form-select-border-color: var(--bs-form-control-border-color);
    --bs-form-select-focus-border-color: var(--bs-form-control-focus-border-color);
    --bs-form-select-disabled-bg: var(--htb-bg-medium);
    --bs-form-check-input-bg: var(--htb-bg-dark);
    --bs-form-check-input-border: 1px solid var(--htb-border-color);
    --bs-form-check-input-checked-bg-color: var(--htb-accent);
    --bs-form-check-input-checked-border-color: var(--htb-accent);
    --bs-form-text-color: var(--htb-text-muted);
    --bs-input-group-addon-bg: var(--htb-bg-light);
    --bs-input-group-addon-color: var(--htb-text-secondary);
    --bs-input-group-addon-border-color: var(--htb-border-color);

    /* Tabele */
    --bs-table-bg: transparent;
    --bs-table-border-color: var(--htb-border-color);
    --bs-table-color: var(--htb-text-secondary);
    --bs-table-striped-bg: rgba(42, 49, 75, 0.4); /* Mai subtil */
    --bs-table-striped-color: var(--htb-text-secondary);
    --bs-table-hover-bg: var(--htb-bg-light);
    --bs-table-hover-color: var(--htb-text-primary);

    /* Acordeon */
    --bs-accordion-bg: transparent;
    --bs-accordion-color: var(--htb-text-secondary);
    --bs-accordion-button-color: var(--htb-text-primary);
    --bs-accordion-button-active-color: var(--htb-accent);
    --bs-accordion-button-active-bg: var(--htb-bg-light); /* Background la activare */
    --bs-accordion-border-color: var(--htb-border-color);
    --bs-accordion-button-focus-border-color: var(--htb-accent);
    --bs-accordion-button-icon: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23adb5bd'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
    --bs-accordion-button-active-icon: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%239fef00'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");

    /* Alerte, Toast, List Group (setări de bază ok) */
    --bs-alert-bg: var(--htb-bg-medium);
    --bs-alert-border-color: var(--htb-border-color);
    --bs-alert-color: var(--htb-text-secondary);
    --bs-toast-bg: var(--htb-bg-light);
    --bs-toast-color: var(--htb-text-primary);
    --bs-toast-border-color: var(--htb-border-color);
    --bs-toast-header-bg: var(--htb-bg-medium);
    --bs-toast-header-color: var(--htb-text-secondary);
    --bs-toast-header-border-color: var(--htb-border-color);
    --bs-list-group-bg: transparent;
    --bs-list-group-color: var(--htb-text-secondary);
    --bs-list-group-border-color: var(--htb-border-color);
    --bs-list-group-action-hover-bg: var(--htb-bg-light);
    --bs-list-group-item-padding-x: 1rem;
    --bs-list-group-item-padding-y: 0.5rem;
    --bs-list-group-item-bg: transparent; /* Ensure list items are transparent */
    --bs-list-group-action-color: var(--htb-text-secondary); /* Color for list items */
    --bs-list-group-action-active-color: var(--htb-text-primary);
    --bs-list-group-action-active-bg: var(--htb-bg-light);
}

/* 3. Stiluri Generale */
body {
  padding: 0;
  padding-bottom: 70px; /* Spațiu pentru navigația inferioară */
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
  font-family: var(--font-stack);
  line-height: 1.6;
  font-size: 0.95rem; /* Font size global puțin mai mic */
}

.container.main-content {
  padding: 15px;
}

h1, h2, h3, h4, h5, h6 {
    color: var(--bs-heading-color);
    font-weight: 600;
}
/* Titluri tab-uri */
.tab-content > h1 {
    font-size: 1.4rem; /* Redus */
    border-bottom: 1px solid var(--htb-border-color);
    padding-bottom: 12px;
    margin-bottom: 25px !important;
    text-align: left; /* Aliniere stânga */
    color: var(--htb-text-secondary); /* Culoare mai subtilă */
}

a {
    color: var(--htb-accent);
    text-decoration: none;
}
a:hover {
    color: #c1ff7a;
}

/* 4. Stiluri Componente Specifice */

/* Navigare Inferioară */
#bottomNav {
  background-color: var(--htb-bg-darker);
  border-top: 1px solid var(--htb-border-color);
  padding: 6px 0; /* Optimizat padding */
  box-shadow: 0 -2px 10px rgba(0,0,0,0.4);
  display: flex;
  justify-content: space-around;
  position: fixed; /* Asigură fixare */
  bottom: 0; left: 0; right: 0; z-index: 1030; /* Peste conținut */
}
#bottomNav button {
  flex: 1;
  background: none; border: none;
  color: var(--htb-text-muted);
  padding: 6px 5px;
  font-size: 0.7rem;
  transition: color 0.2s ease, background-color 0.2s ease;
  border-radius: 4px;
  margin: 0 3px; /* Spațiu între */
  display: flex; flex-direction: column; align-items: center;
  cursor: pointer;
}
#bottomNav button i {
  font-size: 1.3rem; /* Mărime iconițe */
  margin-bottom: 4px; /* Spațiu sub iconiță */
}
#bottomNav button span {
    line-height: 1.1; /* Împiedică textul să fie prea înalt */
}
#bottomNav button:hover {
  color: var(--htb-text-secondary);
  background-color: rgba(255, 255, 255, 0.04);
}
#bottomNav button.active {
  color: var(--htb-accent);
  font-weight: 600;
  background-color: rgba(159, 239, 0, 0.1);
}
#bottomNav button:active {
   transform: none;
   background-color: rgba(159, 239, 0, 0.15);
}

/* Secțiuni (Carduri) */
.form-section,
.backup-restore-section,
.table-controls,
.dashboard-section {
    background-color: var(--htb-bg-medium);
    padding: 18px; /* Padding uniform */
    border-radius: 6px;
    margin-bottom: 25px;
    border: 1px solid var(--htb-border-color);
    box-shadow: 0 1px 4px rgba(0,0,0,0.15);
}
/* Ensure sections in rows have consistent bottom margin */
.row > [class*="col-"] > .dashboard-section {
    margin-bottom: 0; /* Remove default margin when inside a row */
}
.row.gy-3 {
    margin-bottom: 1rem; /* Add margin below rows */
}

.dashboard-section h2, /* Main section titles */
.form-section h2 {
    font-size: 1.05rem;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--htb-border-color);
    color: var(--htb-text-primary);
    font-weight: 600;
}
.dashboard-section h3 { /* Widget titles */
    font-size: 0.9rem; /* Smaller than h2 */
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px dashed var(--htb-border-color); /* Dashed separator */
    color: var(--htb-text-secondary);
    font-weight: 600;
    text-transform: uppercase; /* Uppercase for distinction */
    letter-spacing: 0.5px;
}

/* Stil specific pentru secțiunea de Backup/Restore din Setări */
.data-management-section h3 {
    font-size: 0.95rem;
    color: var(--htb-text-secondary);
    margin-bottom: 0.5rem;
    margin-top: 1rem; /* Spațiu între sub-secțiuni */
    padding-bottom: 5px;
    border-bottom: 1px dashed var(--htb-border-color); /* Separator diferit */
    text-transform: none; /* Override uppercase if needed */
    letter-spacing: normal;
}
.data-management-section h3:first-of-type {
    margin-top: 0; /* Fără margine sus la primul h3 */
}

/* Tabel */
.workout-table-container { margin-top: 20px; }
#workoutTable { border-collapse: separate; border-spacing: 0; width: 100%; }
#workoutTable thead { background-color: var(--htb-bg-light); }
#workoutTable th {
    font-weight: 600; color: var(--htb-text-primary);
    padding: 0.5rem 0.6rem; /* Padding optimizat */
    white-space: nowrap; border-bottom: 2px solid var(--htb-border-color);
    font-size: 0.85rem; /* Header mai mic */
}
#workoutTable th .sort-icon {
    font-size: 0.8em;
    margin-left: 4px;
    color: var(--htb-text-muted);
    transition: color 0.2s ease;
}
#workoutTable th:hover .sort-icon {
    color: var(--htb-text-secondary);
}
#workoutTable th .sort-icon.bi-sort-up,
#workoutTable th .sort-icon.bi-sort-down {
    color: var(--htb-accent); /* Highlight active sort icon */
}

#workoutTable td {
    padding: 0.4rem 0.6rem; /* Padding optimizat */
    vertical-align: middle; border-top: 1px solid var(--htb-border-color);
    font-size: 0.85rem; /* Celule mai mici */
}
/* Eliminăm striping */
.table-striped>tbody>tr:nth-of-type(odd)>* { --bs-table-accent-bg: transparent; color: var(--bs-table-color); }
#workoutTable tbody tr:hover { background-color: var(--bs-table-hover-bg); color: var(--bs-table-hover-color); }
/* Stil notițe în tabel */
#workoutTable td small {
    font-size: 0.75rem; color: var(--htb-text-muted); display: block;
    max-width: 120px; white-space: nowrap; overflow: hidden;
    text-overflow: ellipsis; cursor: default;
}
#workoutTable td small:hover { white-space: normal; overflow: visible; max-width: none; }
/* Butoane acțiuni tabel */
#workoutTable .text-nowrap .btn { padding: .1rem .3rem; font-size: .75rem; margin-left: 3px; }

/* Grafice */
.chart-container { background-color: var(--htb-bg-medium); padding: 15px; border-radius: 6px; border: 1px solid var(--htb-border-color); box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
.chart-title { font-size: 1rem; margin-bottom: 15px; font-weight: 600; }
/* Culori Grafice (actualizate) */
.bar { fill: var(--htb-tag-blue); transition: fill 0.2s ease; }
.bar:hover { fill: #5dade2; }
.line-volume { stroke: var(--htb-accent); stroke-width: 2px; }
.dot-weight { fill: var(--htb-tag-red); stroke: var(--htb-bg-medium); stroke-width: 1.5px; }
/* Stiluri axe D3 */
.chart-container svg text,
.chart-section svg text { /* Apply to all chart text */
    fill: var(--htb-text-secondary);
    font-size: 10px;
}
.chart-container svg .domain,
.chart-section svg .domain { /* Apply to all chart axes */
    stroke: var(--htb-border-color);
}
.chart-container svg .tick line,
.chart-section svg .tick line { /* Apply to all chart ticks */
    stroke: var(--htb-border-color);
    stroke-opacity: 0.4;
}
.chart-container svg .axis-label,
.chart-section svg .axis-label { /* Apply to all chart labels */
    fill: var(--htb-text-secondary);
    font-size: 10px;
    font-weight: 500;
}
/* Stil specific grafic bare musculare */
.muscle-bar { fill: var(--htb-accent); } /* Bare verzi */
.bar-label { /* Etichete pe barele musculare */
    font-size: 9px !important; /* Micșorat */
    fill: #111 !important; /* Text închis pentru lizibilitate pe verde */
    font-weight: bold;
}
/* Stil specific grafic progres */
.line-e1rm { stroke: var(--htb-accent); }
.dot-weight { fill: var(--htb-tag-red); }


/* Dashboard Stats */
.dashboard-header { align-items: baseline; }
.dashboard-header h1 { margin-bottom: 0; }
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)); gap: 18px; } /* Mai multe coloane pe spațiu */
.stat-item .value { font-size: 1.5rem; font-weight: 700; color: var(--htb-accent); line-height: 1.1; }
.stat-item .label { font-size: 0.65rem; color: var(--htb-text-muted); text-transform: uppercase; margin-top: 3px; }

/* Dashboard PR List (Istoric) */
#personalRecordsList .list-group-item { background-color: transparent; border-color: var(--htb-border-color); padding: .5rem 0; font-size: 0.85rem; }
#personalRecordsList .pr-exercise { font-weight: 600; color: var(--bs-emphasis-color); }
#personalRecordsList .badge { font-size: 0.75rem; padding: .3em .5em; } /* Adjust badge size */
#personalRecordsList .badge .pr-type { font-size: 0.65rem; opacity: 0.8; margin-left: 2px; }

/* --- NEW WIDGET STYLES --- */

/* Focus Widget */
.focus-widget-content i { /* Icon styling */
    color: var(--htb-tag-blue); /* Use info color */
}
.focus-widget-content .focus-text {
    font-size: 1.1em;
    color: var(--htb-text-primary);
    margin-bottom: 0.3rem;
}
.focus-widget-content .main-exercise,
.focus-widget-content .target-details {
    font-size: 0.85em;
    color: var(--htb-text-secondary);
    margin-bottom: 0.2rem;
}

/* PR Zone Widget */
.pr-zone-list .list-group-item {
    background-color: transparent;
    border-color: var(--htb-border-color) !important; /* Override bootstrap */
    padding: .4rem 0; /* Reduced padding */
    font-size: 0.8rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 5px;
}
.pr-zone-list .pr-zone-exercise {
    font-weight: 600;
    color: var(--htb-text-secondary);
    flex-shrink: 1; /* Allow shrinking */
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.pr-zone-list .pr-zone-value {
    font-weight: bold;
    color: var(--htb-accent);
    white-space: nowrap; /* Prevent wrapping */
}
.pr-zone-list .pr-zone-date {
    font-size: 0.7rem;
    color: var(--htb-text-muted);
    white-space: nowrap;
}

/* Recent Sessions Widget */
#recentSessionsList .list-group-item {
    background-color: transparent;
    border-color: var(--htb-border-color) !important;
    padding: .4rem 0;
    font-size: 0.8rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
}
#recentSessionsList .session-info {
    flex-grow: 1;
    overflow: hidden; /* Prevent long text overflow */
}
#recentSessionsList .session-title {
    font-weight: 600;
    color: var(--htb-text-secondary);
    display: block; /* Ensure it takes full width */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
#recentSessionsList .session-details {
    font-size: 0.9em;
    color: var(--htb-text-muted);
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
#recentSessionsList .session-date {
    font-size: 0.85em;
    color: var(--htb-text-muted);
    white-space: nowrap;
    flex-shrink: 0; /* Prevent date from shrinking */
}

/* Consistency Heatmap */
#consistencyHeatmapContainer svg {
    max-width: 100%; /* Ensure SVG scales down */
    height: auto;
    display: block; /* Remove extra space below */
    margin: 0 auto; /* Center if container is wider */
}
.heatmap-day {
    stroke: var(--heatmap-border-color);
    stroke-width: 1px;
    shape-rendering: geometricPrecision;
    rx: 2px;
    ry: 2px;
    transition: filter 0.1s ease-in-out, stroke 0.1s ease-in-out;
}
.heatmap-day:hover {
   filter: brightness(1.2);
   stroke: var(--htb-accent); /* Highlight border on hover */
   stroke-width: 1.5px;
}
/* Intensity level classes */
.heatmap-day-level-0 { fill: var(--heatmap-color-0); }
.heatmap-day-level-1 { fill: var(--heatmap-color-1); }
.heatmap-day-level-2 { fill: var(--heatmap-color-2); }
.heatmap-day-level-3 { fill: var(--heatmap-color-3); }
.heatmap-day-level-4 { fill: var(--heatmap-color-4); }

/* Heatmap Legend */
.heatmap-legend {
    font-size: 0.7rem; /* Smaller legend text */
}
.heatmap-legend .legend-color {
    display: inline-block; /* Make them inline */
    vertical-align: middle;
}

/* Heatmap Tooltip */
.heatmap-tooltip {
    position: absolute;
    background-color: var(--tooltip-bg);
    color: var(--tooltip-text);
    padding: 4px 8px; /* Smaller padding */
    border-radius: 4px;
    font-size: 0.75em; /* Smaller font */
    white-space: nowrap;
    pointer-events: none;
    transition: opacity 0.1s ease-out;
    z-index: 1056; /* Ensure above most elements */
    opacity: 0; /* Hidden by default */
}
.heatmap-tooltip strong {
    color: var(--htb-accent); /* Highlight part of tooltip */
}

/* Weight Progress Chart (D3) */
#weightProgressChartContainer {
    min-height: 255px; /* Ensure space */
}
#weightProgressChartContainer svg {
    display: block;
    width: 100%;
    height: auto;
}
#d3WeightProgressChart .line { /* Target specific chart if needed */
    fill: none;
    stroke: var(--htb-tag-red); /* Use red for weight */
    stroke-width: 2px;
}
#d3WeightProgressChart .dot {
    fill: var(--htb-tag-red);
    stroke: var(--htb-bg-medium);
    stroke-width: 1.5px;
}
#d3WeightProgressChart .axis path,
#d3WeightProgressChart .axis line {
    stroke: var(--htb-border-color);
}
#d3WeightProgressChart .axis text {
    fill: var(--htb-text-secondary);
    font-size: 10px;
}
#d3WeightProgressChart .grid line {
    stroke: var(--htb-border-color);
    stroke-opacity: 0.2; /* Make grid lines very faint */
}

/* --- END NEW WIDGET STYLES --- */


/* Setări */
.custom-file-upload {
    background-color: var(--bs-btn-warning-bg); color: var(--bs-btn-warning-color); border-color: var(--bs-btn-warning-border-color);
    transition: background-color 0.2s ease, border-color 0.2s ease; padding: .3rem .75rem; font-size: .875rem;
}
.custom-file-upload:hover { background-color: var(--bs-btn-warning-hover-bg); border-color: var(--bs-btn-warning-hover-border-color); }
.settings-list { max-height: 250px; overflow-y: auto; border: 1px solid var(--htb-border-color); border-radius: var(--bs-border-radius-sm); margin-top: 8px; }
.settings-list .list-group-item { background-color: var(--htb-bg-dark); border-color: var(--htb-border-color); padding: .4rem .75rem; }
.settings-list .list-group-item button { padding: 0 .3rem; line-height: 1; font-size: 0.9rem; }

/* Alte ajustări */
.pr-indicator { color: var(--htb-accent); margin-left: 5px; font-size: 0.9em; vertical-align: middle; }
#muscleGroups { min-height: 110px; } /* Select grupe musculare */

/* Scrollbar */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--htb-bg-darker); }
::-webkit-scrollbar-thumb { background-color: var(--htb-bg-light); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background-color: var(--htb-border-color); }

/* Tab Content Fade */
.tab-content { display: none; animation: fadeIn 0.3s ease-in-out; }
.tab-content.active { display: block; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* Responsive Adjustments */
@media (max-width: 768px) {
    body { padding-bottom: 65px; /* Ajustare padding pt nav mai mică */ }
    .container.main-content { padding: 10px; }
    .form-section, .backup-restore-section, .table-controls, .dashboard-section, .chart-container { padding: 15px; }
    .tab-content > h1 { font-size: 1.3rem; margin-bottom: 20px !important; padding-bottom: 8px; }
    .stats-grid { gap: 10px; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); }
    .stat-item .value { font-size: 1.3rem; }
    .stat-item .label { font-size: 0.6rem; }
    #bottomNav button i { font-size: 1.2rem; margin-bottom: 2px; }
    #bottomNav button span { font-size: 0.65rem; }
    #bottomNav { padding: 4px 0; }

    /* Ensure widgets stack nicely */
    .row.gy-3 { margin-bottom: 0.75rem; } /* Reduce margin between rows */
    .dashboard-section h3 { font-size: 0.85rem; } /* Slightly smaller widget titles */
}

@media (max-width: 576px) {
    .stats-grid { grid-template-columns: repeat(3, 1fr); } /* Force 3 columns on smallest */
    .dashboard-section h3 { font-size: 0.8rem; }
    .pr-zone-list .list-group-item,
    #recentSessionsList .list-group-item { font-size: 0.75rem; }
    .heatmap-legend { flex-wrap: wrap; justify-content: center; } /* Allow legend to wrap */
}