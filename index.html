<!DOCTYPE html>
<html lang="ro" data-bs-theme="dark">
<head>
    <meta charset="UTF-8" />
    <title>Gym Log Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- JS Dependencies (Load before app.js) -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.1/jspdf.plugin.autotable.min.js"></script>

</head>
<body>

<!-- Container Toast -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1100">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto" id="toastTitle">Notificare</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toastBody">
            Mesaj.
        </div>
    </div>
</div>

<!-- Container Principal -->
<div class="container main-content py-3">

    <!-- ==================== Tab Content: Adaugă (Log Form) ==================== -->
    <div id="logTabContent" class="tab-content active">
        <h1 class="mb-4 display-6">Adaugă Antrenament</h1>
        <!-- Removed .card and .card-body, relying on .form-section styling -->
        <div class="form-section">
            <h2 id="formTitle" class="mb-4 fs-5">Detalii Exercițiu</h2> <!-- Title styled by .form-section h2 -->
            <form id="workoutForm" class="needs-validation" novalidate>
                <input type="hidden" id="editId" name="editId">

                <!-- Exercise Details Section -->
                <div class="row g-3 mb-4">
                    <div class="col-md-4 col-sm-6">
                        <label for="date" class="form-label form-label-sm fw-semibold">Data</label>
                        <input type="date" class="form-control form-control-sm" id="date" name="date" required />
                        <div class="invalid-feedback">Data este obligatorie.</div>
                    </div>
                    <div class="col-md-8 col-sm-6">
                        <label for="muscleGroups" class="form-label form-label-sm fw-semibold">Grupe Musculare</label>
                        <select class="form-select form-select-sm" id="muscleGroups" name="muscleGroups" multiple required size="6">
                            <option value="Piept">Piept</option>
                            <option value="Spate">Spate</option>
                            <option value="Umeri">Umeri</option>
                            <option value="Trapez">Trapez</option>
                            <option value="Biceps">Biceps</option>
                            <option value="Triceps">Triceps</option>
                            <option value="Coapse - Cvadricepși">Coapse - Cvadricepși</option>
                            <option value="Coapse - Biceps femural">Coapse - Biceps femural</option>
                            <option value="Coapse - Aductori">Coapse - Aductori</option>
                            <option value="Fesieri">Fesieri</option>
                            <option value="Gambe">Gambe</option>
                            <option value="Abdomen">Abdomen</option>
                            <option value="Antebraț">Antebraț</option>
                        </select>
                        <div class="invalid-feedback">Selectați cel puțin o grupă.</div>
                    </div>
                    <div class="col-12">
                        <label for="exercise" class="form-label form-label-sm fw-semibold">Exercițiu</label>
                        <select class="form-select form-select-sm" id="exercise" name="exercise" required disabled>
                            <option value="" selected disabled>Selectați o grupă musculară...</option>
                            <!-- Populat din JS -->
                        </select>
                        <div class="invalid-feedback">Exercițiul este obligatoriu.</div>
                    </div>
                </div>

                <!-- Sets Section -->
                <div class="mb-3">
                    <label class="form-label form-label-sm fw-semibold mb-2">Seturi</label>

                    <!-- Warning Message -->
                    <div id="setsWarning" class="alert alert-warning alert-sm py-1 px-2 d-none mb-2" style="font-size: 0.8rem;">
                        Introduceți Rep. și Kg valide (>0) pentru toate seturile.
                    </div>

                    <!-- Set Headers -->
                    <div class="row g-2 mb-2 d-none d-sm-flex small text-muted fw-semibold">
                        <div class="col-1 text-center">Set</div>
                        <div class="col">Rep.</div>
                        <div class="col">Kg</div>
                        <div class="col-auto" style="width: 45px;"></div> <!-- Spacer for delete button -->
                    </div>

                    <!-- Container for Dynamic Sets -->
                    <div id="setsContainer">
                        <!-- Set rows added by JS -->
                    </div>
                    <br>

                    <!-- Add Set Button -->
                    <div class="mt-2">
                        <button type="button" class="btn btn-outline-warning btn-sm" id="addSetBtn">
                            <i class="bi bi-plus-lg"></i> Adaugă Set
                        </button>
                    </div>
                </div>

                <!-- Notes Section -->
                <div class="mb-4">
                    <label for="notes" class="form-label form-label-sm">Notițe (opțional)</label>
                    <textarea class="form-control form-control-sm" id="notes" name="notes" rows="3"></textarea>
                </div>

                <!-- Action Buttons -->
                <div class="d-flex justify-content-end gap-2">
                    <button type="button" class="btn btn-secondary btn-sm d-none" id="cancelEditBtn">Anulează</button>
                    <button type="submit" class="btn btn-success" id="submitBtn">Salvează</button>
                </div>
            </form>
        </div> <!-- End form-section -->
    </div><!-- Sfârșit #logTabContent -->


    <!-- ==================== Tab Content: Dashboard ==================== -->
    <div id="dashboardTabContent" class="tab-content">
        <div class="dashboard-header mb-4 d-flex justify-content-between align-items-center flex-wrap gap-2">
             <h1 class="display-6 mb-0 fs-3">Dashboard</h1>
             <select class="form-select form-select-sm w-auto" id="dashboardPeriodSelect" aria-label="Selectează perioada pentru dashboard">
                 <option value="last7days" selected>Ultimele 7 zile</option>
                 <option value="last30days">Ultimele 30 zile</option>
                 <option value="allTime">Tot timpul</option>
             </select>
        </div>

        <!-- Rezumat & Medii -->
        <div class="dashboard-section">
            <h2 class="fs-5">Rezumat Perioadă</h2>
             <div class="stats-grid">
                 <div class="stat-item text-center"> <span class="value" id="statsExercises">0</span> <span class="label">Înregistrări</span> </div>
                 <div class="stat-item text-center"> <span class="value" id="statsSets">0</span> <span class="label">Seturi Totale</span> </div>
                 <div class="stat-item text-center"> <span class="value" id="statsReps">0</span> <span class="label">Repetări Totale</span> </div>
                 <div class="stat-item text-center"> <span class="value" id="statsAvgWeight">0 kg</span> <span class="label">Greutate Medie</span> </div>
                 <div class="stat-item text-center"> <span class="value" id="statsTotalVolume">0 T</span> <span class="label">Volum Total</span> </div>
             </div>
        </div>
         <div class="dashboard-section">
            <h2 class="fs-5">Medii Săptămânale (Perioadă)</h2>
             <div class="stats-grid">
                 <div class="stat-item text-center"> <span class="value" id="weeklyAvgWorkouts">0</span> <span class="label">Zile Antr./Săpt</span> </div>
                 <div class="stat-item text-center"> <span class="value" id="weeklyAvgSets">0</span> <span class="label">Seturi/Săpt</span> </div>
                 <div class="stat-item text-center"> <span class="value" id="weeklyAvgReps">0</span> <span class="label">Repetări/Săpt</span> </div>
                 <div class="stat-item text-center"> <span class="value" id="weeklyAvgRepsPerSet">0</span> <span class="label">Repetări/Set</span> </div>
                 <div class="stat-item text-center"> <span class="value" id="weeklyAvgVolume">0 T</span> <span class="label">Volum/Săpt</span> </div>
             </div>
         </div>

        <!-- Widget Row 1 -->
        <div class="row gx-3 gy-3 mt-1">
            <div class="col-lg-6 col-md-6">
                <div class="dashboard-section h-100 d-flex flex-column">
                    <h3 class="fs-6 mb-2">Zona PR Recente <i class="bi bi-star-fill text-warning"></i> <small>(Ultimele 30 zile)</small></h3>
                    <div id="newPrZoneList" class="pr-zone-list list-group list-group-flush flex-grow-1">
                        <!-- Populated by JS -->
                    </div>
                    <p id="noNewPrMessage" class="text-center text-muted small mt-2 mb-0 d-none">Niciun record personal în ultima lună.</p>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="dashboard-section h-100 d-flex flex-column">
                    <h3 class="fs-6 mb-2">Sesiuni Recente <small>(Ultimele 5 zile)</small></h3>
                    <ul id="recentSessionsList" class="list-group list-group-flush list-group-sm flex-grow-1">
                         <!-- Populated by JS -->
                    </ul>
                     <p id="noRecentSessionsMessage" class="text-center text-muted small mt-2 mb-0 d-none">Nu există sesiuni recente.</p>
                </div>
            </div>
        </div>

        <!-- Widget Row 2 (Charts) -->
        <div class="row gx-3 gy-3 mt-3"> <!-- Increased top margin -->
            <div class="col-lg-6">
                <div class="dashboard-section chart-section h-100">
                    <h3 class="chart-title fs-6">Progres Greutate Corporală (kg)</h3>
                    <div id="weightProgressChartContainer" style="min-height: 255px;" class="d-flex align-items-center justify-content-center">
                        
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="dashboard-section chart-section h-100">
                    <h3 class="chart-title fs-6">Consistență Recentă <small>(Ultimele 4 Săpt.)</small></h3>
                    <div id="consistencyHeatmapContainer" class="d-flex justify-content-center align-items-center mb-2" style="min-height: 100px;">
                        <p class="text-center text-muted small">Se încarcă heatmap...</p>
                    </div>
                    <div class="heatmap-legend d-flex justify-content-center align-items-center small text-muted gap-1 flex-wrap">
                        <span>Pauză</span>
                        <span class="legend-color" style="background-color: var(--heatmap-color-0);"></span>
                        <span class="legend-color" style="background-color: var(--heatmap-color-1);"></span>
                        <span class="legend-color" style="background-color: var(--heatmap-color-2);"></span>
                        <span class="legend-color" style="background-color: var(--heatmap-color-3);"></span>
                        <span class="legend-color" style="background-color: var(--heatmap-color-4);"></span>
                        <span>Intens</span>
                    </div>
                    <div id="heatmapTooltip" class="heatmap-tooltip">Tooltip</div>
                </div>
            </div>
        </div>

        <!-- Other Charts Row -->
         <div class="dashboard-section mt-3">
            <div class="row gx-3 gy-3">
                <div class="col-lg-6">
                    <div class="chart-section mb-lg-0 h-100"> <!-- Added h-100 -->
                        <h3 class="chart-title fs-6">Grupe Musculare Lucrate <small>(Top 10 - Perioada)</small></h3>
                        <div class="chart-container" id="musclesWorkedChartContainer">
                            <svg id="d3MusclesChart" width="100%" height="300"></svg>
                            <p id="noMuscleDataMessage" class="text-center text-muted d-none mt-3">Nu există date pentru perioada selectată.</p>
                        </div>
                    </div>
                </div>
                 <div class="col-lg-6">
                     <div class="chart-section mb-lg-0 h-100"> <!-- Added h-100 -->
                         <h3 class="chart-title fs-6">Volum Total Zilnic <small>(Perioada)</small></h3>
                         <svg id="d3VolumeChartDash" width="100%" height="300"></svg>
                     </div>
                 </div>
                 <div class="col-lg-6">
                     <div class="chart-section mb-0 h-100"> <!-- Added h-100 -->
                         <h3 class="chart-title fs-6">Progres Exercițiu <small>(Tot Timpul)</small></h3>
                         <div class="mb-3 px-2">
                             <select id="progressExerciseSelectDash" class="form-select form-select-sm" aria-label="Selectează exercițiu pentru grafic progres">
                                 <option value="">Alege un exercițiu...</option>
                                 <!-- Populated by JS -->
                             </select>
                         </div>
                         <svg id="d3ProgressChartDash" width="100%" height="255"></svg>
                     </div>
                 </div>
                 <div class="col-lg-6">
                    <div class="dashboard-section mb-0 h-100 d-flex flex-column"> <!-- Added h-100 and flex -->
                        <h3 class="fs-6 mb-2">Recorduri Personale Istoric <small>(Top 5 după e1RM)</small></h3>
                        <ul id="personalRecordsList" class="list-group list-group-flush flex-grow-1">
                            <!-- Populated by JS -->
                        </ul>
                         <p id="noPrMessage" class="text-center text-muted small mt-2 mb-0 d-none">Nu există recorduri înregistrate.</p>
                    </div>
                 </div>
             </div>
         </div>
    </div> <!-- Sfârșit #dashboardTabContent -->

    <!-- ==================== Tab Content: Istoric (Log History) ==================== -->
    <div id="historyTabContent" class="tab-content">
        <h1 class="mb-4 display-6">Istoric Antrenamente</h1>

        <!-- Controale Filtrare -->
         <div class="form-section mb-3">
             <h2 class="fs-5 mb-3">Filtrează Jurnal</h2>
             <div class="table-controls row g-2 align-items-end"> <!-- Changed align-items-center to align-items-end -->
                 <div class="col-lg-3 col-md-6 col-sm-12">
                     <label for="filterDate" class="form-label form-label-sm">După dată</label>
                     <input type="date" id="filterDate" class="form-control form-control-sm" title="Filtrează după dată">
                 </div>
                 <div class="col-lg-3 col-md-6 col-sm-12">
                     <label for="filterExercise" class="form-label form-label-sm">După exercițiu</label>
                     <input type="text" id="filterExercise" class="form-control form-control-sm" placeholder="Nume exercițiu...">
                 </div>
                 <div class="col-lg-4 col-md-6 col-sm-12">
                     <label for="filterMuscleGroup" class="form-label form-label-sm">După grupă musculară</label>
                     <select id="filterMuscleGroup" class="form-select form-select-sm" aria-label="Filtrează după grupă musculară">
                         <option value="">Toate grupele...</option>
                         <!-- Populated by JS based on logged data -->
                     </select>
                 </div>
                 <div class="col-lg-2 col-md-6 col-sm-12 text-lg-end">
                     <button id="clearFilters" class="btn btn-warning btn-sm w-100" title="Șterge Filtre"><i class="bi bi-x-circle"></i> Reset</button>
                 </div>
             </div>
         </div>

         <!-- Container pentru Jurnalul Grupat -->
         <div id="workoutLogContainer" class="workout-log-grouped mb-3">
             <!-- Populat din JS -->
             <div id="noDataMessage" class="form-section text-center text-muted d-none py-5">
                 <i class="bi bi-journal-x fs-1 mb-3"></i>
                 <p class="mb-1">Nu există antrenamente care să corespundă filtrelor selectate.</p>
                 <p class="small mb-0">Încearcă să ajustezi filtrele sau <a href="#" onclick="document.getElementById('logTabBtn').click(); return false;">adaugă un antrenament nou</a>.</p>
             </div>
         </div>

         <!-- Pagination Controls -->
         <div id="paginationControls" class="d-flex justify-content-center align-items-center mt-3 pagination-controls">
             <!-- Populat din JS -->
         </div>

    </div><!-- Sfârșit #historyTabContent -->

    <!-- ==================== Tab Content: Plan ==================== -->
    <div id="planTabContent" class="tab-content">
        <h1 class="mb-4 display-6">Planuri de Antrenament</h1>

        <!-- Container for Plan Cards -->
        <div class="plan-container accordion" id="planCardAccordion"> <!-- Added accordion class and ID -->

            <!-- Rutina A: Push Card (Collapsible) -->
            <div class="card plan-card accordion-item mb-3 shadow-sm"> <!-- Added accordion-item -->
                <h2 class="card-header plan-card-header accordion-header" id="headingPlanPush"> <!-- Added accordion-header -->
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePlanPush" aria-expanded="false" aria-controls="collapsePlanPush">
                        <i class="bi bi-person-arms-up me-2"></i>Rutina A: Push (Împins)
                        <span class="badge bg-info-subtle text-info-emphasis rounded-pill ms-auto me-3">Piept, Umeri, Triceps</span>
                    </button>
                </h2>
                <div id="collapsePlanPush" class="accordion-collapse collapse" aria-labelledby="headingPlanPush" data-bs-parent="#planCardAccordion">
                    <div class="card-body accordion-body"> <!-- Added accordion-body -->
                        <div class="plan-exercise-list">
                            <!-- Exercise Item 1 -->
                            <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <!-- Make name clickable for modal -->
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Împins la piept cu bară">
                                        <span class="exercise-name fw-medium">Împins la piept cu bară</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 6-10 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Împins la piept cu bară" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                            <!-- Exercise Item 2 -->
                            <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Împins deasupra capului cu bară (Presă militară)">
                                        <span class="exercise-name fw-medium">Împins deasupra capului cu bară (Presă militară)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 8-12 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Împins deasupra capului cu bară (Presă militară)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <!-- Exercise Item 3 -->
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Împins la piept înclinat cu gantere">
                                        <span class="exercise-name fw-medium">Împins la piept înclinat cu gantere</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 10-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Împins la piept înclinat cu gantere" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                            <!-- Exercise Item 4 -->
                            <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Ridicări laterale cu gantere">
                                        <span class="exercise-name fw-medium">Ridicări laterale cu gantere</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">4 seturi x 12-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Ridicări laterale cu gantere" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <!-- Exercise Item 5 -->
                            <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Extensii la cablu (sfoară/bară)">
                                        <span class="exercise-name fw-medium">Extensii la cablu (sfoară/bară)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 10-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Extensii la cablu (sfoară/bară)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <!-- Exercise Item 6 -->
                            <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Extensii deasupra capului (ganteră/bară/cablu)">
                                        <span class="exercise-name fw-medium">Extensii deasupra capului (ganteră/bară/cablu)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 12-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Extensii deasupra capului (ganteră/bară/cablu)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- End plan-card Push -->

            <!-- Rutina B: Pull Card (Collapsible) -->
            <div class="card plan-card accordion-item mb-3 shadow-sm">
                <h2 class="card-header plan-card-header accordion-header" id="headingPlanPull">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePlanPull" aria-expanded="false" aria-controls="collapsePlanPull">
                        <i class="bi bi-person-down me-2"></i>Rutina B: Pull (Tras)
                        <span class="badge bg-info-subtle text-info-emphasis rounded-pill ms-auto me-3">Spate, Biceps, Trapez</span>
                    </button>
                </h2>
                <div id="collapsePlanPull" class="accordion-collapse collapse" aria-labelledby="headingPlanPull" data-bs-parent="#planCardAccordion">
                    <div class="card-body accordion-body">
                        <div class="plan-exercise-list">
                            <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Tracțiuni (priză pronată)">
                                        <span class="exercise-name fw-medium">Tracțiuni (priză pronată) / Tracțiuni la helcometru</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 6-12 repetări</span>
                                </div>
                                <div class="exercise-actions btn-group btn-group-sm" role="group">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Tracțiuni (priză pronată)" title="Loghează Pull-up">
                                        <i class="bi bi-plus-circle-fill me-1"></i> PU
                                    </button>
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Tracțiuni la helcometru" title="Loghează Lat Pulldown">
                                        <i class="bi bi-plus-circle-fill me-1"></i> LPD
                                    </button>
                                </div>
                            </div>
                            <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Ramat cu bară din aplecat">
                                        <span class="exercise-name fw-medium">Ramat cu bară din aplecat / Ramat la cablu din șezut</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 8-12 repetări</span>
                                </div>
                                 <div class="exercise-actions btn-group btn-group-sm" role="group">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Ramat cu bară din aplecat" title="Loghează Barbell Row">
                                        <i class="bi bi-plus-circle-fill me-1"></i> BR
                                    </button>
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Ramat la cablu din șezut" title="Loghează Cable Row">
                                        <i class="bi bi-plus-circle-fill me-1"></i> CR
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Tracțiuni la față (Face Pull)">
                                        <span class="exercise-name fw-medium">Tracțiuni la față (Face Pull)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 15-20 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Tracțiuni la față (Face Pull)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Flexii cu bară (dreaptă/EZ)">
                                        <span class="exercise-name fw-medium">Flexii cu bară (dreaptă/EZ) / Flexii cu gantere</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 8-12 repetări</span>
                                </div>
                                <div class="exercise-actions btn-group btn-group-sm" role="group">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Flexii cu bară (dreaptă/EZ)" title="Loghează Barbell Curl">
                                        <i class="bi bi-plus-circle-fill me-1"></i> BC
                                    </button>
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Flexii cu gantere (alternativ/simultan)" title="Loghează Dumbbell Curl">
                                        <i class="bi bi-plus-circle-fill me-1"></i> DC
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Flexii ciocan">
                                        <span class="exercise-name fw-medium">Flexii ciocan</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 10-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Flexii ciocan" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- End plan-card Pull -->

            <!-- Rutina C: Legs Card (Collapsible) -->
            <div class="card plan-card accordion-item mb-3 shadow-sm">
                <h2 class="card-header plan-card-header accordion-header" id="headingPlanLegs">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePlanLegs" aria-expanded="false" aria-controls="collapsePlanLegs">
                       <i class="bi bi-universal-access me-2"></i>Rutina C: Legs (Picioare)
                       <span class="badge bg-info-subtle text-info-emphasis rounded-pill ms-auto me-3">Cvadricepși, Femurali, Fesieri, Gambe</span>
                    </button>
                </h2>
                <div id="collapsePlanLegs" class="accordion-collapse collapse" aria-labelledby="headingPlanLegs" data-bs-parent="#planCardAccordion">
                    <div class="card-body accordion-body">
                        <div class="plan-exercise-list">
                            <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Genuflexiuni cu bară pe spate">
                                        <span class="exercise-name fw-medium">Genuflexiuni cu bară pe spate</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">4 seturi x 6-10 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Genuflexiuni cu bară pe spate" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Îndreptări românești (RDL)">
                                        <span class="exercise-name fw-medium">Îndreptări românești (RDL)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 8-12 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Îndreptări românești (RDL)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Presa pentru picioare">
                                        <span class="exercise-name fw-medium">Presa pentru picioare</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 10-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Presa pentru picioare" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Flexii femurale la aparat (șezut)">
                                        <span class="exercise-name fw-medium">Flexii femurale la aparat (șezut)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 12-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Flexii femurale la aparat (șezut)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Extensii pentru cvadriceps">
                                        <span class="exercise-name fw-medium">Extensii pentru cvadriceps</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 12-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Extensii pentru cvadriceps" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Ridicări pe vârfuri din picioare (gambe)">
                                        <span class="exercise-name fw-medium">Ridicări pe vârfuri din picioare (gambe)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">4 seturi x 15-20 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Ridicări pe vârfuri din picioare (gambe)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- End plan-card Legs -->

             <!-- Rutina D: Full Body Card (Collapsible) -->
            <div class="card plan-card accordion-item mb-3 shadow-sm">
                <h2 class="card-header plan-card-header accordion-header" id="headingPlanFullBody">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePlanFullBody" aria-expanded="false" aria-controls="collapsePlanFullBody">
                       <i class="bi bi-body-text me-2"></i>Rutina D: Full Body
                       <span class="badge bg-info-subtle text-info-emphasis rounded-pill ms-auto me-3">Tot Corpul</span>
                    </button>
                </h2>
                <div id="collapsePlanFullBody" class="accordion-collapse collapse" aria-labelledby="headingPlanFullBody" data-bs-parent="#planCardAccordion">
                    <div class="card-body accordion-body">
                         <p class="text-muted small">Antrenament echilibrat pentru toate grupele majore.</p>
                        <div class="plan-exercise-list">
                            <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Genuflexiuni cu bară pe spate">
                                        <span class="exercise-name fw-medium">Genuflexiuni cu bară pe spate</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 8-12 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Genuflexiuni cu bară pe spate" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Împins la piept cu bară">
                                        <span class="exercise-name fw-medium">Împins la piept cu bară</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 8-12 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Împins la piept cu bară" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Ramat cu bară din aplecat">
                                        <span class="exercise-name fw-medium">Ramat cu bară din aplecat</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 8-12 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Ramat cu bară din aplecat" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Împins deasupra capului cu bară (Presă militară)">
                                        <span class="exercise-name fw-medium">Împins deasupra capului cu bară (Presă militară)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 8-12 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Împins deasupra capului cu bară (Presă militară)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Flexii femurale la aparat (culcat)">
                                        <span class="exercise-name fw-medium">Flexii femurale la aparat (culcat)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 10-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Flexii femurale la aparat (culcat)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Flexii cu gantere (alternativ/simultan)">
                                        <span class="exercise-name fw-medium">Flexii cu gantere (alternativ/simultan)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 10-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Flexii cu gantere (alternativ/simultan)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                             <div class="plan-exercise-item">
                                <div class="exercise-details">
                                    <a href="#" class="exercise-name-link" data-bs-toggle="modal" data-bs-target="#exerciseInfoModal" data-exercise-name="Extensii la cablu (sfoară/bară)">
                                        <span class="exercise-name fw-medium">Extensii la cablu (sfoară/bară)</span>
                                    </a>
                                    <span class="exercise-sets small text-muted d-block">3 seturi x 10-15 repetări</span>
                                </div>
                                <div class="exercise-actions">
                                    <button class="btn btn-sm btn-outline-success log-plan-exercise-btn" data-exercise="Extensii la cablu (sfoară/bară)" title="Loghează acest exercițiu">
                                        <i class="bi bi-plus-circle-fill me-1"></i> Log
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- End plan-card Full Body -->


            <!-- Create New Plan Button Area -->
            <div class="text-center mt-4 pt-3 border-top border-secondary border-opacity-25">
                <button class="btn btn-outline-secondary btn-sm disabled" title="Funcționalitate viitoare">
                    <i class="bi bi-plus-circle"></i> Creează Plan Nou
                </button>
                <p class="small text-muted mt-2">(Funcționalitate în dezvoltare)</p>
            </div>

        </div> <!-- End plan-container -->
    </div><!-- Sfârșit #planTabContent -->


    <!-- ==================== Tab Content: Setări ==================== -->
    <div id="settingsTabContent" class="tab-content">
         <h1 class="mb-4 display-6">Setări & Date</h1>

         <!-- Gestionează Exerciții -->
         <div class="form-section">
             <h2 class="mb-3 fs-5">Gestionează Lista de Exerciții</h2>
             <div class="mb-3">
                 <label for="newExerciseNameSettings" class="form-label form-label-sm">Adaugă exercițiu custom:</label>
                 <div class="input-group input-group-sm">
                     <input type="text" class="form-control" id="newExerciseNameSettings" placeholder="Nume exercițiu nou">
                     <button class="btn btn-success" type="button" id="addNewExerciseBtnSettings"><i class="bi bi-plus-circle-fill"></i> Adaugă</button>
                 </div>
             </div>
             <div>
                 <label class="form-label form-label-sm">Exerciții adăugate de tine:</label>
                 <ul id="existingExercisesListSettings" class="list-group list-group-flush list-group-sm settings-list">
                     <li class="list-group-item text-muted">Nu ai adăugat exerciții custom.</li>
                     <!-- Populated by JS -->
                 </ul>
             </div>
         </div>

         <!-- Gestionează Greutate Corporală -->
         <div class="form-section">
            <h2 class="mb-3 fs-5">Greutate Corporală</h2>
            <form id="bodyweightForm" class="row g-2 needs-validation" novalidate>
                <div class="col-sm-5">
                    <label for="bodyweightDate" class="form-label form-label-sm">Data</label>
                    <input type="date" class="form-control form-control-sm" id="bodyweightDate" required>
                    <div class="invalid-feedback">Data este obligatorie.</div>
                </div>
                <div class="col-sm-4">
                    <label for="bodyweightValue" class="form-label form-label-sm">Greutate (kg)</label>
                    <input type="number" step="0.1" min="0" class="form-control form-control-sm" id="bodyweightValue" placeholder="ex: 75.5" required>
                    <div class="invalid-feedback">Greutatea este obligatorie (>0).</div>
                </div>
                <div class="col-sm-3 align-self-end">
                    <button type="submit" class="btn btn-primary btn-sm w-100" id="saveBodyweightBtn"><i class="bi bi-save"></i> Salvează</button>
                </div>
            </form>
            <hr class="my-3">
            <div>
                <label class="form-label form-label-sm">Ultimele înregistrări (max 10):</label>
                <ul id="bodyweightLogList" class="list-group list-group-flush list-group-sm settings-list">
                    <li class="list-group-item text-muted">Nu există înregistrări de greutate.</li>
                    <!-- Populated by JS -->
                </ul>
            </div>
         </div>

         <!-- Gestionare Date (Backup/Restore/Export) -->
         <div class="form-section data-management-section">
             <h2 class="mb-3 fs-5">Gestionare Date Aplicație</h2>
             <div class="mb-4">
                 <h3 class="fs-6 mb-2">Backup & Restaurare</h3>
                 <p class="form-text mb-2" style="font-size: 0.85rem;">Salvează (JSON) sau încarcă toate datele aplicației (antrenamente, exerciții custom, recorduri, greutate corporală). Datele sunt stocate doar local în browser.</p>
                 <div class="d-flex gap-2 flex-wrap">
                     <button class="btn btn-info btn-sm" id="backupDataBtnSettings"><i class="bi bi-download"></i> Descarcă Backup</button>
                     <label for="restoreFileSettings" class="btn btn-warning btn-sm custom-file-upload"><i class="bi bi-upload"></i> Încarcă Backup...</label>
                     <input type="file" id="restoreFileSettings" accept=".json" style="display: none;">
                 </div>
             </div>
             <div>
                 <h3 class="fs-6 mb-2">Export Jurnal Antrenamente</h3>
                 <p class="form-text mb-2" style="font-size: 0.85rem;">Descarcă jurnalul de antrenamente într-un format specific.</p>
                 <div class="btn-group btn-group-sm" role="group" aria-label="Butoane export date">
                     <button id="exportCSVSettings" class="btn btn-outline-success"><i class="bi bi-file-earmark-spreadsheet"></i> Export CSV</button>
                     <button id="exportTXTSettings" class="btn btn-outline-secondary"><i class="bi bi-file-earmark-text"></i> Export TXT</button>
                     <button id="exportPDFSettings" class="btn btn-outline-danger"><i class="bi bi-file-earmark-pdf"></i> Export PDF</button>
                 </div>
             </div>
         </div>
    </div><!-- Sfârșit #settingsTabContent -->

</div><!-- Sfârșit .main-content -->


<!-- ==================== Navigare Inferioară ==================== -->
<nav id="bottomNav">
    <button id="logTabBtn" class="active" data-target="logTabContent" title="Adaugă"> <i class="bi bi-plus-square-fill"></i> <span>Adaugă</span> </button>
    <button id="dashboardTabBtn" data-target="dashboardTabContent" title="Dashboard"> <i class="bi bi-grid-1x2-fill"></i> <span>Dashboard</span> </button>
    <button id="historyTabBtn" data-target="historyTabContent" title="Istoric"> <i class="bi bi-list-ul"></i> <span>Istoric</span> </button>
    <button id="planTabBtn" data-target="planTabContent" title="Plan"> <i class="bi bi-calendar-check-fill"></i> <span>Plan</span> </button>
    <button id="settingsTabBtn" data-target="settingsTabContent" title="Setări"> <i class="bi bi-gear-fill"></i> <span>Setări</span> </button>
</nav>

<!-- ==================== Exercise Info Modal ==================== -->
<div class="modal fade" id="exerciseInfoModal" tabindex="-1" aria-labelledby="exerciseModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exerciseModalTitle">Detalii Exercițiu</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
            <div class="col-md-5 mb-3 mb-md-0 text-center">
                <img id="exerciseModalImage" src="images/placeholder.png" class="img-fluid rounded exercise-modal-image" alt="Imagine exercițiu">
               
            </div>
            <div class="col-md-7">
                <h5>Informații Generale</h5>
                <ul class="list-unstyled exercise-info-list">
                    <li><strong>Grupă Musculară:</strong> <span id="exerciseModalGroup">-</span></li>
                    <li><strong>Tip:</strong> <span id="exerciseModalType" class="text-capitalize">-</span></li>
                    <li><strong>Echipament:</strong> <span id="exerciseModalEquipment" class="text-capitalize">-</span></li>
                    <li><strong>Dificultate:</strong> <span id="exerciseModalDifficulty" class="text-capitalize">-</span></li>
                </ul>
                <hr>
                <h5>Mod de Execuție</h5>
                <p id="exerciseModalExecution" class="small">
                    <!-- Placeholder text - replace with actual instructions if available -->
                    Consultați un antrenor calificat sau resurse video de încredere pentru a asigura forma corectă.
                    Mențineți spatele drept, abdomenul încordat și controlați mișcarea pe tot parcursul execuției.
                    Evitați balansul excesiv și concentrați-vă pe contracția mușchiului vizat.
                </p>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Închide</button>
      </div>
    </div>
  </div>
</div>
<!-- ==================== END Exercise Info Modal ==================== -->


<!-- JS Dependencies & App Script -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="app.js"></script> <!-- Load your app logic last -->

</body>
</html>